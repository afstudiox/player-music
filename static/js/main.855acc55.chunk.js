(this.webpackJsonpplayermusic=this.webpackJsonpplayermusic||[]).push([[0],{22:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(23),s=a.n(c),i=(a(31),a(15)),o=a(3),l=a(4),u=a(6),d=a(5),j=a(13),b=a(8),m=a(14),p=a(2),h=a.n(p),O=a(7),f="user",v=function(e){return localStorage.setItem(f,JSON.stringify(e))},x=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},g=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(f));null===t&&(t={}),x(t)(e)}))},k=function(e){return new Promise((function(t){v(Object(i.a)(Object(i.a)({},{name:"",email:"",image:"",description:""}),e)),x("OK")(t)}))},N=function(e){return new Promise((function(t){v(Object(i.a)({},e)),x("OK")(t)}))},w=(a(33),a(0)),y=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).redirection=function(t){e.props.history.push("/".concat(t))},e.authentication=Object(O.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.inputName,e.redirection("loading"),t.next=4,k({name:a});case 4:e.redirection("search");case 5:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){var a=t.target,n=a.name;e.setState(Object(m.a)({},n,a.value),e.enableButton())},e.enableButton=function(){var t=!1;return t=e.state.inputName.length<2,e.setState({buttonState:t})},e.state={buttonState:!0,inputName:""},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.buttonState;return Object(w.jsxs)("div",{"data-testid":"page-login",className:"login-container row",children:[Object(w.jsx)("div",{className:"login-logo"}),Object(w.jsxs)("div",{className:"login-card col",children:[Object(w.jsx)("h2",{children:"Seja bem vindo ao seu player favorito"}),Object(w.jsxs)("form",{className:"col",children:[Object(w.jsx)("label",{htmlFor:"input-nome",children:Object(w.jsx)("input",{type:"text",name:"inputName","data-testid":"login-name-input",placeholder:"Digite seu nome",onChange:this.handleChange})}),Object(w.jsx)("button",{type:"submit",name:"btn-submit","data-testid":"login-submit-button",disabled:e,onClick:this.authentication,children:"Entrar"})]})]})]})}}]),a}(n.Component),S=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.result,t=e.artworkUrl100,a=e.collectionName,n=e.artistName,r=e.collectionId;return Object(w.jsx)(j.b,{to:"/album/".concat(r),search:r,children:Object(w.jsxs)("div",{className:"album-item col","data-testid":"link-to-album-".concat(r),children:[Object(w.jsx)("img",{className:"album-image",src:t,alt:""}),Object(w.jsx)("p",{className:"album-artist",children:n}),Object(w.jsx)("p",{className:"album-name",children:a})]})})}}]),a}(n.Component),C=S,I=(a(43),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsx)("div",{className:"loading-container",children:Object(w.jsx)("div",{className:"loading"})})}}]),a}(n.Component)),F=I,U=(a(22),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={name:"",hasUser:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,this.setState({name:t.name,hasUser:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.name,a=e.hasUser;return Object(w.jsxs)("header",{"data-testid":"header-component",className:"col",children:[Object(w.jsxs)("div",{className:"header-container-superior row",children:[Object(w.jsx)(j.b,{to:"/search",children:Object(w.jsx)("div",{className:"logo"})}),a?Object(w.jsxs)("div",{className:"user-container",children:[Object(w.jsx)("div",{className:"user"}),Object(w.jsx)("p",{"data-testid":"header-user-name",children:t})]}):Object(w.jsx)("div",{className:"hidden",children:Object(w.jsx)(F,{})})]}),Object(w.jsxs)("nav",{className:"nav-container",children:[Object(w.jsx)(j.b,{className:"link-nav",to:"/search","data-testid":"link-to-search",children:"SEARCH"}),Object(w.jsx)(j.b,{className:"link-nav",to:"/favorites","data-testid":"link-to-favorites",children:"FAVORITES"}),Object(w.jsx)(j.b,{className:"link-nav",to:"/profile","data-testid":"link-to-profile",children:"PROFILE"})]})]})}}]),a}(n.Component)),A=U,P=function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n,r,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=P,B=(a(44),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).request=Object(O.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.inputArtist,e.setState({loading:!0}),t.next=4,L(a);case 4:n=t.sent,e.setState({loading:!1,resultArtist:n,firstLoad:!1}),e.clearField();case 7:case"end":return t.stop()}}),t)}))),e.clearField=function(){var t=e.state.inputArtist;e.setState({nameArtist:t,inputArtist:""})},e.enableButton=function(){var t=!1;return t=e.state.inputArtist.length<1,e.setState({buttonState:t})},e.renderCondiction=function(){var t=e.state,a=t.buttonState,n=t.firstLoad,r=t.resultArtist,c=t.nameArtist;return 0!==r.length||n?Object(w.jsxs)("div",{className:"search-container col",children:[Object(w.jsxs)("div",{className:"search-form-container col",children:[Object(w.jsx)("h2",{children:"Encontre sua banda ou artista"}),Object(w.jsxs)("form",{className:"row",children:[Object(w.jsx)("label",{htmlFor:"input-search",children:Object(w.jsx)("input",{type:"text",name:"inputArtist","data-testid":"search-artist-input",placeholder:"Nome do Artista",onChange:e.handleChange})}),Object(w.jsx)("button",{type:"submit",name:"btn-submit","data-testid":"search-artist-button",disabled:a,onClick:e.request,children:"Procurar"})]})]}),Object(w.jsxs)("div",{className:"albuns-container col",children:[Object(w.jsxs)("p",{children:["Resultado para :"," ",Object(w.jsx)("span",{children:c})]}),Object(w.jsx)("div",{className:"albuns-line row",children:r.map((function(e){return Object(w.jsx)(C,{result:e},e.collectionId)}))})]})]}):Object(w.jsx)("div",{className:"albuns-container row",children:Object(w.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"})})},e.handleChange=function(t){var a=t.target,n=a.name;e.setState(Object(m.a)({},n,a.value),e.enableButton())},e.state={buttonState:!0,inputArtist:"",loading:!1,firstLoad:!0,resultArtist:[],nameArtist:""},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.loading;return Object(w.jsxs)("div",{"data-testid":"page-search",children:[Object(w.jsx)(A,{}),e?Object(w.jsx)(F,{}):this.renderCondiction()]})}}]),a}(n.Component)),D=function(){var e=Object(O.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=D,J=a(18),M=a(26),q="favorite_songs";JSON.parse(localStorage.getItem(q))||localStorage.setItem(q,JSON.stringify([]));var R=function(){return JSON.parse(localStorage.getItem(q))},K=function(e){return localStorage.setItem(q,JSON.stringify(e))},T=function(e){return function(t){setTimeout((function(){t(e)}),500)}},H=function(){return new Promise((function(e){var t=R();T(t)(e)}))},V=function(e){return new Promise((function(t){if(e){var a=R();K([].concat(Object(M.a)(a),[e]))}T("OK")(t)}))},_=function(e){return new Promise((function(t){var a=R();K(a.filter((function(t){return t.trackId!==e.trackId}))),T("OK")(t)}))},z=(a(45),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).handleFavorite=function(){var e=Object(O.a)(h.a.mark((function e(t){var a,r,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.target,c=r.name,s=r.checked,n.setState((a={},Object(m.a)(a,c,s),Object(m.a)(a,"loading",!0),a),Object(O.a)(h.a.mark((function e(){var t,a,r,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.favorite,a=n.props,r=a.trackName,c=a.previewUrl,s=a.trackId,i=a.loadFavorites,!t){e.next=7;break}return e.next=5,V({trackName:r,previewUrl:c,trackId:s});case 5:e.next=9;break;case 7:return e.next=9,_({trackName:r,previewUrl:c,trackId:s});case 9:n.setState({loading:!1}),i();case 11:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r=n.props.isFavorite;return n.state={favorite:r,loading:!1},n}return Object(l.a)(a,[{key:"handlePlay",value:function(e){var t=e.target,a="path"===t.nodeName?t.parentNode:t,n=document.querySelector(".active");n&&(n.classList.remove("active"),n.previousElementSibling.classList.remove("display-none"),n.pause()),a.classList.add("display-none"),a.nextSibling.classList.add("active"),a.nextSibling.play()}},{key:"render",value:function(){var e=this,t=this.props,a=t.trackName,n=t.previewUrl,r=t.trackId,c=this.state,s=c.loading,i=c.favorite,o=i?Object(w.jsx)(J.a,{}):Object(w.jsx)(J.b,{});return s?Object(w.jsx)(F,{}):Object(w.jsxs)("div",{className:"track-line-container row",children:[Object(w.jsxs)("div",{className:"player-container",children:[Object(w.jsx)(J.c,{onClick:function(t){return e.handlePlay(t)}}),Object(w.jsx)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:Object(w.jsx)("track",{kind:"captions"})})]}),Object(w.jsx)("label",{htmlFor:r,children:Object(w.jsx)("input",{"data-testid":"checkbox-music-".concat(r),id:r,type:"checkbox",name:"favorite",checked:i,onChange:this.handleFavorite})}),Object(w.jsx)("span",{children:o}),Object(w.jsx)("p",{children:a})]})}}]),a}(n.Component));z.defaultProps={loadFavorites:function(){}};var G=z,Q=(a(46),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getFavoritesList=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:t=e.sent,n.setState({favoriteList:t});case 4:case"end":return e.stop()}}),e)}))),n.request=Object(O.a)(h.a.mark((function e(){var t,a,r,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.id,e.next=3,E(t);case 3:a=e.sent,r=a[0],c=r.artistName,s=r.collectionName,i=r.artworkUrl100,n.setState({artistName:c,collectionName:s,artworkUrl100:i,tracks:a.filter((function(e,t){return 0!==t}))});case 6:case"end":return e.stop()}}),e)}))),n.state={artistName:"",collectionName:"",artworkUrl100:"",tracks:[],loading:!1,favoriteList:void 0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.request(),this.getFavoritesList()}},{key:"render",value:function(){var e=this.state.loading,t=this.state,a=t.artistName,n=t.collectionName,r=t.artworkUrl100,c=t.tracks,s=t.favoriteList;return e?Object(w.jsx)(F,{}):Object(w.jsxs)("div",{"data-testid":"page-album",children:[Object(w.jsx)(A,{}),Object(w.jsxs)("div",{className:"album-container",children:[Object(w.jsxs)("div",{className:"album-container-header row",children:[Object(w.jsx)("img",{src:r,alt:"Foto do Album"}),Object(w.jsxs)("div",{className:"album-container-header-text",children:[Object(w.jsx)("p",{"data-testid":"album-artist-name",children:a}),Object(w.jsx)("p",{"data-testid":"album-name",children:n})]})]}),Object(w.jsx)("div",{className:"album-container-tracks col",children:c&&s&&c.map((function(e,t){var a=s.some((function(t){return t.trackId===e.trackId}));return Object(w.jsx)(G,{trackId:e.trackId,trackName:e.trackName,previewUrl:e.previewUrl,tracks:c,isFavorite:a},t)}))})]})]})}}]),a}(n.Component)),W=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).loadFavorites=Object(O.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,H();case 3:a=t.sent,e.setState({tracks:a,loading:!1});case 5:case"end":return t.stop()}}),t)}))),e.state={loading:!1,tracks:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadFavorites()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.tracks;return Object(w.jsxs)("div",{"data-testid":"page-favorites",children:[Object(w.jsx)(A,{}),a?Object(w.jsx)(F,{}):Object(w.jsx)("div",{className:"album-container",children:Object(w.jsx)("div",{className:"album-container-tracks col",children:n.map((function(t){var a=n.some((function(e){return e.trackId===t.trackId}));return Object(w.jsx)(G,{trackId:t.trackId,trackName:t.trackName,previewUrl:t.previewUrl,tracks:n,isFavorite:a,loadFavorites:e.loadFavorites},t.trackId)}))})})]})}}]),a}(n.Component),X=(a(47),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).getUserInfo=Object(O.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,g();case 3:a=t.sent,e.setState({user:a,loading:!1});case 5:case"end":return t.stop()}}),t)}))),e.state={loading:!1,user:void 0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.user;return Object(w.jsxs)("div",{"data-testid":"page-profile",children:[Object(w.jsx)(A,{}),Object(w.jsx)("div",{className:"profile-container col",children:!t&&a?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"profile-user-info col",children:[Object(w.jsx)("img",{src:"https://www.business2community.com/wp-content/plugins/wp-user-avatars/wp-user-avatars/assets/images/mystery.jpg",alt:"Foto de ".concat(a.name)}),Object(w.jsx)("p",{children:a.name}),Object(w.jsx)("p",{children:a.email}),Object(w.jsx)("p",{children:a.description})]}),Object(w.jsx)("div",{className:"profile-edit row",children:Object(w.jsx)(j.b,{to:"/profile/edit",children:" Editar Perfil "})})]}):Object(w.jsx)(F,{})})]})}}]),a}(n.Component)),Y=(a(48),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{user:Object(i.a)(Object(i.a)({},e.user),{},Object(m.a)({},n,r))}}),e.validateBtn)},e.handleClick=function(t){t.preventDefault(),e.setState({loading:!0},Object(O.a)(h.a.mark((function t(){var a,n,r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.user,n=a.name,r=a.email,c=a.description,t.next=3,N({name:n,email:r,description:c});case 3:e.setState({redirect:!0,loading:!1});case 4:case"end":return t.stop()}}),t)}))))},e.getUserInfo=function(){e.setState({loading:!0},Object(O.a)(h.a.mark((function t(){var a,n,r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:a=t.sent,n=a.name,r=a.email,c=a.description,e.setState({user:{name:n,email:r,description:c},loading:!1});case 5:case"end":return t.stop()}}),t)}))))},e.validateBtn=function(){var t=e.state.user,a=t.name,n=t.email,r=t.description,c=a&&n&&r;e.setState({disableBtn:!c})},e.state={loading:!1,disableBtn:!0,redirect:!1,user:{name:void 0,email:void 0,description:void 0}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.user,n=e.disableBtn,r=e.redirect,c=a.name,s=a.email,i=a.description;return Object(w.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(w.jsx)(A,{}),Object(w.jsx)("div",{className:"profile-edit-container col",children:!t&&a?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"profile-edit-image",children:Object(w.jsx)("img",{src:"https://www.business2community.com/wp-content/plugins/wp-user-avatars/wp-user-avatars/assets/images/mystery.jpg",alt:"Foto do Perfil"})}),Object(w.jsxs)("form",{className:"profile-edit-form col",children:[Object(w.jsx)("label",{htmlFor:"name",children:Object(w.jsx)("input",{type:"text",id:"name",name:"name",className:"form-control",value:c,"data-testid":"edit-input-name",placeholder:"Nome",onChange:this.handleChange})}),Object(w.jsx)("label",{htmlFor:"email",children:Object(w.jsx)("input",{type:"email",id:"email",name:"email",className:"form-control",value:s,"data-testid":"edit-input-email",placeholder:"Email",onChange:this.handleChange})}),Object(w.jsx)("label",{htmlFor:"description",children:Object(w.jsx)("input",{type:"text",id:"description",name:"description",className:"form-control",value:i,"data-testid":"edit-input-description",placeholder:"Descri\xe7\xe3o",onChange:this.handleChange})}),Object(w.jsx)("button",{type:"submit","data-testid":"edit-button-save",className:"saveBtn",disabled:n,onClick:this.handleClick,children:"Enviar"})]})]}):Object(w.jsx)(F,{})}),r&&Object(w.jsx)(b.a,{exact:!0,to:"/profile"})]})}}]),a}(n.Component)),Z=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsx)("div",{"data-testid":"page-not-found"})}}]),a}(n.Component),$=Z,ee=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsx)(j.a,{basename:"/player-music",children:Object(w.jsxs)(b.d,{children:[Object(w.jsx)(b.b,{exact:!0,path:"/",render:function(e){return Object(w.jsx)(y,Object(i.a)({},e))}}),Object(w.jsx)(b.b,{exact:!0,path:"/header",render:function(e){return Object(w.jsx)(A,Object(i.a)({},e))}}),Object(w.jsx)(b.b,{path:"/search",component:B}),Object(w.jsx)(b.b,{path:"/album/:id",render:function(e){return Object(w.jsx)(Q,Object(i.a)({},e))}}),Object(w.jsx)(b.b,{path:"/favorites",component:W}),Object(w.jsx)(b.b,{exact:!0,path:"/profile",component:X}),Object(w.jsx)(b.b,{path:"/profile/edit",component:Y}),Object(w.jsx)(b.b,{path:"/loading",component:F}),Object(w.jsx)(b.b,{exact:!0,path:"*",component:$})]})})}}]),a}(r.a.Component),te=ee;s.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(te,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.855acc55.chunk.js.map